const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductDetails-BGTy-ibM.js","assets/utils-DHPMa1J3.js","assets/utils-tg5Vg9HO.css"])))=>i.map(i=>d[i]);
import{P as L}from"./ProductList-VPTHBbxC.js";import{g as h,c as f,r as p,s as y,l as b}from"./utils-DHPMa1J3.js";const S="modulepreload",$=function(o){return"/trueCommerce/"+o},g={},_=function(t,e,a){let r=Promise.resolve();if(e&&e.length>0){let s=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),m=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));r=s(e.map(c=>{if(c=$(c),c in g)return;g[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":S,d||(l.as="script"),l.crossOrigin="",l.href=c,m&&l.setAttribute("nonce",m),document.head.appendChild(l),d)return new Promise((w,E)=>{l.addEventListener("load",w),l.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=s,window.dispatchEvent(n),!n.defaultPrevented)throw s}return r.then(s=>{for(const n of s||[])n.status==="rejected"&&i(n.reason);return t().catch(i)})};function C(o){if(o.ok)return o.json();throw new Error(`Bad response: ${o.status} ${o.statusText}`)}const P="https://fakestoreapi.com/";class v{constructor(t){this.category=t,this.path=`${P}products`}async getData(){try{const t=await fetch(this.path);return await C(t)}catch(t){return console.error("Error loading data:",t),[]}}async findProductById(t){return(await this.getData()).find(a=>String(a.id)===String(t))}}const q=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));class k{constructor(t,e){this.key=t,this.listElement=e}init(){this.renderCartContents(),this.addEventListeners()}cartItemTemplate(t){return`
      <li class="cart-card divider">
        <a href="/trueCommerce/product_pages/?product=${t.id}" class="cart-card__image">
          <img src="${t.image}" alt="${t.title}" />
        </a>
        <div class="cart-card__info">
          <a href="/trueCommerce/product_pages/?product=${t.id}">
            <h2 class="card__name">${t.title}</h2>
          </a>
        </div>
        <div class="cart-actions">
          <div class="quantity-control">
            <button class="qty-btn add" data-id="${t.id}">+</button>
            <span class="qty-text">${t.quantity}</span>
            <button class="qty-btn subtract" data-id="${t.id}">-</button>
            <button class="qty-btn remove" data-id="${t.id}">ðŸ—‘</button>
          </div>
          <p class="cart-card__price">$${(t.price*t.quantity).toFixed(2)}</p>
        </div>
      </li>
    `}renderCartContents(){if(!this.listElement)return;const t=h(this.key)||[];this.listElement.innerHTML="",document.querySelector(".summary-items").textContent=t.length,t.length>0?(this.listElement.innerHTML=t.map(e=>this.cartItemTemplate(e)).join(""),this.calculateCartTotal(t)):(this.listElement.innerHTML="<p>Your cart is empty.</p>",this.calculateCartTotal(null))}calculateCartTotal(t){const e=document.querySelector(".cart-footer");if(!e)return;if(!t||t.length===0){e.classList.add("hide");return}let a=0;t.forEach(i=>{const s=parseFloat(i.price||0),n=i.quantity||1;a+=s*n});const r=document.querySelector(".cart-total");r&&(r.textContent=`$${a.toFixed(2)}`,e.classList.remove("hide"))}changeQuantity(t,e){let a=h(this.key)||[],r=f(a,"id",e);if(!(r<0)){switch(t){case"add":a[r].quantity+=1;break;case"subtract":a[r].quantity===1?a.splice(r,1):a[r].quantity-=1;break}a.length===0?p(this.key):y(this.key,a),this.renderCartContents()}}removeItem(t){let e=h(this.key)||[],a=f(e,"id",t);a>-1&&(e.splice(a,1),e.length===0?p(this.key):y(this.key,e)),this.renderCartContents()}addEventListeners(){this.listElement&&this.listElement.addEventListener("click",t=>{t.target.classList.contains("add")&&this.changeQuantity("add",t.target.dataset.id),t.target.classList.contains("subtract")&&this.changeQuantity("subtract",t.target.dataset.id),t.target.classList.contains("remove")&&this.removeItem(t.target.dataset.id)})}}document.addEventListener("DOMContentLoaded",async()=>{await b();const o=window.location.pathname;if(o.includes("cart")){const t=document.querySelector(".cart-list");t&&new k("so-cart",t).init()}if(o.includes("product_listing")){const e=new URLSearchParams(window.location.search).get("category"),a=new v(e),r=document.querySelector(".product-list");r&&new L(e,a,r).init()}if(o.includes("product_pages")){const{default:t}=await _(async()=>{const{default:s}=await import("./ProductDetails-BGTy-ibM.js");return{default:s}},__vite__mapDeps([0,1,2])),e=(await _(async()=>{const{default:s}=await Promise.resolve().then(()=>q);return{default:s}},void 0)).default,a=new URLSearchParams(window.location.search),r=a.get("product"),i=a.get("category");if(r){const s=new e(i);new t(r,s).init()}}});
